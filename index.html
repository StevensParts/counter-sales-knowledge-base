<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counter Sales Knowledge Base - Steven's Parts</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .search-section {
            padding: 40px;
            background: #f8f9fa;
        }

        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        #searchBox {
            width: 100%;
            padding: 20px 60px 20px 20px;
            font-size: 18px;
            border: 3px solid #e0e6ed;
            border-radius: 50px;
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        #searchBox:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        .search-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #667eea;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-btn:hover {
            background: #5a67d8;
            transform: translateY(-50%) scale(1.05);
        }

        .search-btn::after {
            content: "üîç";
            font-size: 18px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-weight: 500;
        }

        .results-section {
            padding: 0 40px 40px;
        }

        #searchResults {
            max-width: 1000px;
            margin: 0 auto;
        }

        .result-item {
            background: white;
            margin: 15px 0;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }

        .result-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .result-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .result-brand {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .result-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .result-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 0.9em;
            color: #888;
        }

        .result-meta span {
            background: #f8f9fa;
            padding: 5px 10px;
            border-radius: 8px;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .no-results h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .search-section {
                padding: 20px;
            }
            
            #searchBox {
                font-size: 16px;
                padding: 15px 50px 15px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Counter Sales Knowledge Base</h1>
            <p>Steven's Parts - Find Appliance Parts & Error Codes</p>
        </div>

        <div class="search-section">
            <div class="search-container">
                <input type="text" id="searchBox" placeholder="Search by part number, error code, brand, or appliance type..." title="Search for parts">
                <button class="search-btn" onclick="performSearch()"></button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalParts">247</div>
                    <div class="stat-label">Total Parts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="inStockParts">189</div>
                    <div class="stat-label">In Stock</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="applianceTypes">12</div>
                    <div class="stat-label">Appliance Types</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="partCategories">8</div>
                    <div class="stat-label">Brands</div>
                </div>
            </div>
        </div>

        <div class="results-section">
            <div id="searchResults"></div>
        </div>
    </div>

    <script>
        // PARTS DATABASE
        const knowledgeBase = [
            // Whirlpool Parts
            {
                partNumber: "W10310240",
                title: "Electronic Control Board",
                brand: "Whirlpool",
                appliance: "Washer",
                description: "Main electronic control board for front-load washers. Controls all wash cycles and diagnostic functions.",
                errorCodes: ["F1-E1", "F3-E1"],
                compatibility: ["WFW9351YW", "WFW8630HW", "WFW75HEFW"],
                price: "$245.99",
                inStock: true,
                category: "Control Boards"
            },
            {
                partNumber: "W10619654",
                title: "Door Lock Assembly",
                brand: "Whirlpool",
                appliance: "Washer",
                description: "Complete door lock assembly with switch for front-load washers. Includes safety interlock mechanism.",
                errorCodes: ["F2-E1", "dL"],
                compatibility: ["WFW9351YW", "WFW8630HW"],
                price: "$127.50",
                inStock: true,
                category: "Door Components"
            },
            {
                partNumber: "W10348269",
                title: "Drain Pump Motor",
                brand: "Whirlpool",
                appliance: "Washer",
                description: "High-efficiency drain pump motor for front and top-load washers. 120V AC motor with impeller.",
                errorCodes: ["F9-E1", "dL"],
                compatibility: ["WTW7500GC", "WFW9351YW"],
                price: "$89.95",
                inStock: true,
                category: "Motors & Pumps"
            },
            {
                partNumber: "W11227912",
                title: "Oven Temperature Sensor",
                brand: "Whirlpool",
                appliance: "Range",
                description: "RTD temperature sensor for electric and gas ranges. Monitors oven temperature for accurate cooking.",
                errorCodes: ["F3-E2", "F1-E5"],
                compatibility: ["WFE505W0HZ", "WGE745C0FS"],
                price: "$45.75",
                inStock: true,
                category: "Temperature Sensors"
            },

            // LG Parts
            {
                partNumber: "4681EA2001T",
                title: "Drain Pump Assembly",
                brand: "LG",
                appliance: "Washer",
                description: "Complete drain pump assembly for LG front-load washers. Includes motor, housing, and filter access.",
                errorCodes: ["OE", "1E"],
                compatibility: ["WM3770HWA", "WM4270HWA"],
                price: "$156.80",
                inStock: true,
                category: "Motors & Pumps"
            },
            {
                partNumber: "5220FR2075L",
                title: "Water Level Pressure Switch",
                brand: "LG",
                appliance: "Washer",
                description: "Water level pressure switch assembly. Controls water fill levels and prevents overfill conditions.",
                errorCodes: ["FE", "PE"],
                compatibility: ["WM3770HWA", "WM2487HRMA"],
                price: "$78.25",
                inStock: false,
                category: "Switches & Controls"
            },
            {
                partNumber: "EBR73304203",
                title: "Main Control Board PCB",
                brand: "LG",
                appliance: "Refrigerator",
                description: "Main control board for LG refrigerators with inverter compressor. Controls cooling, defrost, and diagnostics.",
                errorCodes: ["ER IF", "ER FF"],
                compatibility: ["LFXS28968S", "LMXS30776S"],
                price: "$289.99",
                inStock: true,
                category: "Control Boards"
            },

            // GE Parts
            {
                partNumber: "WH12X10355",
                title: "Water Pump Motor",
                brand: "GE",
                appliance: "Dishwasher",
                description: "Main wash pump motor for GE dishwashers. High-pressure pump for superior cleaning performance.",
                errorCodes: ["C1", "C2"],
                compatibility: ["GDF630PSS", "PDT775SSF"],
                price: "$198.45",
                inStock: true,
                category: "Motors & Pumps"
            },
            {
                partNumber: "WR55X10942",
                title: "Defrost Heater Assembly",
                brand: "GE",
                appliance: "Refrigerator",
                description: "Defrost heater assembly for GE side-by-side refrigerators. Prevents ice buildup on evaporator coils.",
                errorCodes: ["FF", "F0"],
                compatibility: ["GSS25GSHSS", "PSS28KSHSS"],
                price: "$67.30",
                inStock: true,
                category: "Heating Elements"
            },

            // Samsung Parts
            {
                partNumber: "DC97-16782A",
                title: "Drum Spider Assembly",
                brand: "Samsung",
                appliance: "Washer",
                description: "Heavy-duty drum spider assembly for Samsung front-load washers. Aluminum construction with bearing support.",
                errorCodes: ["UB", "UE"],
                compatibility: ["WF42H5000AW", "WF45K6200AW"],
                price: "$324.75",
                inStock: false,
                category: "Drum Components"
            },
            {
                partNumber: "DA97-12540A",
                title: "Ice Maker Assembly",
                brand: "Samsung",
                appliance: "Refrigerator",
                description: "Complete ice maker assembly for Samsung French door refrigerators. Includes control module and harvest motor.",
                errorCodes: ["88 88", "OF OF"],
                compatibility: ["RF28HMEDBSR", "RF23J9011SR"],
                price: "$245.60",
                inStock: true,
                category: "Ice Systems"
            },

            // Kenmore Parts
            {
                partNumber: "137108100",
                title: "Dryer Heating Element",
                brand: "Kenmore",
                appliance: "Dryer",
                description: "High-wattage heating element for Kenmore electric dryers. Coiled nichrome wire element with ceramic insulators.",
                errorCodes: ["F01", "F02"],
                compatibility: ["110.65132400", "110.68132800"],
                price: "$45.95",
                inStock: true,
                category: "Heating Elements"
            },

            // Frigidaire Parts
            {
                partNumber: "5304505394",
                title: "Oven Control Board",
                brand: "Frigidaire",
                appliance: "Range",
                description: "Electronic oven control board for Frigidaire electric ranges. Touch pad compatible with clock and timer functions.",
                errorCodes: ["F10", "F11"],
                compatibility: ["FGEF3032MF", "CGEF3032MF"],
                price: "$189.25",
                inStock: true,
                category: "Control Boards"
            }
        ];

        // ERROR CODE DATABASE
        const errorCodes = {
            // Whirlpool Error Codes
            'F1-E1': { brand: 'Whirlpool', appliance: 'Washer', issue: 'Control board communication error', parts: ['W10310240'], probability: 85 },
            'F2-E1': { brand: 'Whirlpool', appliance: 'Washer', issue: 'Door lock failure', parts: ['W10619654'], probability: 90 },
            'F9-E1': { brand: 'Whirlpool', appliance: 'Washer', issue: 'Drain pump failure', parts: ['W10348269'], probability: 95 },
            'F3-E2': { brand: 'Whirlpool', appliance: 'Range', issue: 'Oven temperature sensor failure', parts: ['W11227912'], probability: 80 },
            'dL': { brand: 'Whirlpool', appliance: 'Washer', issue: 'Door lock error or drain issue', parts: ['W10619654', 'W10348269'], probability: 85 },
            
            // LG Error Codes
            'OE': { brand: 'LG', appliance: 'Washer', issue: 'Drain error - pump or clog', parts: ['4681EA2001T'], probability: 90 },
            'FE': { brand: 'LG', appliance: 'Washer', issue: 'Water overfill error', parts: ['5220FR2075L'], probability: 80 },
            'PE': { brand: 'LG', appliance: 'Washer', issue: 'Water level sensor error', parts: ['5220FR2075L'], probability: 75 },
            'ER IF': { brand: 'LG', appliance: 'Refrigerator', issue: 'Ice fan error', parts: ['EBR73304203'], probability: 70 },
            
            // GE Error Codes
            'C1': { brand: 'GE', appliance: 'Dishwasher', issue: 'Wash pump motor failure', parts: ['WH12X10355'], probability: 85 },
            'FF': { brand: 'GE', appliance: 'Refrigerator', issue: 'Freezer defrost error', parts: ['WR55X10942'], probability: 80 },
            
            // Samsung Error Codes
            'UB': { brand: 'Samsung', appliance: 'Washer', issue: 'Unbalanced load or drum issue', parts: ['DC97-16782A'], probability: 60 },
            '88 88': { brand: 'Samsung', appliance: 'Refrigerator', issue: 'Ice maker malfunction', parts: ['DA97-12540A'], probability: 75 },
            
            // Frigidaire Error Codes
            'F10': { brand: 'Frigidaire', appliance: 'Range', issue: 'Oven overheating', parts: ['5304505394'], probability: 70 },
        };

        // SEARCH FUNCTIONALITY
        function performSearch() {
            const searchTerm = document.getElementById('searchBox').value.trim().toLowerCase();
            const resultsContainer = document.getElementById('searchResults');
            
            console.log('Searching for:', searchTerm); // Debug log
            
            if (!searchTerm) {
                resultsContainer.innerHTML = '';
                return;
            }

            let results = [];
            
            // Search in parts database
            knowledgeBase.forEach(item => {
                let score = 0;
                let matchReasons = [];
                
                // Exact part number match (highest priority)
                if (item.partNumber.toLowerCase() === searchTerm) {
                    score += 100;
                    matchReasons.push('Exact part number match');
                }
                // Partial part number match
                else if (item.partNumber.toLowerCase().includes(searchTerm)) {
                    score += 80;
                    matchReasons.push('Part number contains search term');
                }
                
                // Error code match
                if (item.errorCodes && item.errorCodes.some(code => code.toLowerCase().includes(searchTerm))) {
                    score += 70;
                    matchReasons.push('Related to error code');
                }
                
                // Brand match
                if (item.brand.toLowerCase().includes(searchTerm)) {
                    score += 60;
                    matchReasons.push('Brand match');
                }
                
                // Appliance type match
                if (item.appliance.toLowerCase().includes(searchTerm)) {
                    score += 50;
                    matchReasons.push('Appliance type match');
                }
                
                // Title match
                if (item.title.toLowerCase().includes(searchTerm)) {
                    score += 40;
                    matchReasons.push('Title contains search term');
                }
                
                // Description match
                if (item.description.toLowerCase().includes(searchTerm)) {
                    score += 30;
                    matchReasons.push('Description match');
                }
                
                // Category match
                if (item.category.toLowerCase().includes(searchTerm)) {
                    score += 25;
                    matchReasons.push('Category match');
                }
                
                if (score > 0) {
                    results.push({
                        item: item,
                        score: score,
                        reasons: matchReasons
                    });
                }
            });

            // Check if search term is an error code
            const errorCodeInfo = errorCodes[searchTerm.toUpperCase()];
            if (errorCodeInfo) {
                // Find parts related to this error code
                const relatedParts = knowledgeBase.filter(item => 
                    errorCodeInfo.parts.includes(item.partNumber)
                );
                
                relatedParts.forEach(part => {
                    const existingResult = results.find(r => r.item.partNumber === part.partNumber);
                    if (existingResult) {
                        existingResult.score += 90;
                        existingResult.errorCodeMatch = errorCodeInfo;
                    } else {
                        results.push({
                            item: part,
                            score: 90,
                            reasons: ['Error code diagnosis match'],
                            errorCodeMatch: errorCodeInfo
                        });
                    }
                });
            }

            // Sort results by score (highest first)
            results.sort((a, b) => b.score - a.score);
            
            console.log('Found results:', results.length); // Debug log
            
            // Display results
            displayResults(results, searchTerm);
        }

        function displayResults(results, searchTerm) {
            const resultsContainer = document.getElementById('searchResults');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="no-results">
                        <h3>No results found for "${searchTerm}"</h3>
                        <p>Try searching for:</p>
                        <ul style="list-style: none; margin-top: 15px;">
                            <li>‚Ä¢ Part numbers (e.g., W10310240)</li>
                            <li>‚Ä¢ Error codes (e.g., F1-E1, OE)</li>
                            <li>‚Ä¢ Appliance types (washer, dryer, refrigerator)</li>
                            <li>‚Ä¢ Brand names (Whirlpool, LG, GE)</li>
                        </ul>
                    </div>
                `;
                return;
            }

            let html = `<h2 style="margin-bottom: 20px; color: #2c3e50;">Found ${results.length} result${results.length > 1 ? 's' : ''} for "${searchTerm}"</h2>`;
            
            results.forEach(result => {
                const item = result.item;
                const stockStatus = item.inStock ? 
                    '<span style="color: #27ae60;">‚úì In Stock</span>' : 
                    '<span style="color: #e74c3c;">‚ö† Out of Stock</span>';
                
                let errorCodeInfo = '';
                if (result.errorCodeMatch) {
                    errorCodeInfo = `
                        <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 15px 0; border-radius: 5px;">
                            <strong>Error Code Diagnosis:</strong> ${result.errorCodeMatch.issue}<br>
                            <strong>Repair Probability:</strong> ${result.errorCodeMatch.probability}%
                        </div>
                    `;
                }
                
                html += `
                    <div class="result-item">
                        <div class="result-title">${item.partNumber} - ${item.title}</div>
                        <div class="result-brand">${item.brand} ${item.appliance}</div>
                        <div class="result-description">${item.description}</div>
                        ${errorCodeInfo}
                        <div class="result-meta">
                            <span><strong>Price:</strong> ${item.price}</span>
                            <span><strong>Category:</strong> ${item.category}</span>
                            <span>${stockStatus}</span>
                            ${item.errorCodes && item.errorCodes.length > 0 ? 
                                `<span><strong>Error Codes:</strong> ${item.errorCodes.join(', ')}</span>` : ''}
                        </div>
                    </div>
                `;
            });
            
            resultsContainer.innerHTML = html;
        }

        // TEST FUNCTION
        function testSearch() {
            console.log('Testing search functionality...');
            console.log('Knowledge base items:', knowledgeBase.length);
            console.log('Error codes database entries:', Object.keys(errorCodes).length);
            
            // Test search function
            document.getElementById('searchBox').value = 'control';
            performSearch();
            
            console.log('Test complete - check results above');
        }

        // EVENT LISTENERS
        document.addEventListener('DOMContentLoaded', function() {
            const searchBox = document.getElementById('searchBox');
            
            // Search on Enter key
            searchBox.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // Search as you type (with delay)
            let searchTimeout;
            searchBox.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(performSearch, 300);
            });
            
            console.log('Search system loaded and ready!');
        });

        // Make functions available globally for testing
        window.performSearch = performSearch;
        window.testSearch = testSearch;
        window.knowledgeBase = knowledgeBase;
    </script>
</body>
</html>
