<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counter Sales Knowledge Base - Steven's Parts</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            overflow: hidden;
            height: calc(100vh - 20px);
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-left h1 {
            font-size: 1.8em;
            margin-bottom: 5px;
            font-weight: 300;
        }
        
        .header-left p {
            opacity: 0.9;
            font-size: 0.95em;
        }
        
        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .quick-stats {
            background: rgba(255,255,255,0.1);
            padding: 10px 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.85em;
        }
        
        .search-section {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .search-container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }
        
        .search-box {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 1.1em;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .search-box:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .search-filters {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .filter-select {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            background: white;
            font-size: 0.9em;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        .sidebar {
            width: 280px;
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
            padding: 20px;
            overflow-y: auto;
        }
        
        .category-section {
            margin-bottom: 25px;
        }
        
        .category-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .category-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin: 3px 0;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }
        
        .category-item:hover {
            background: #e9ecef;
        }
        
        .category-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .category-count {
            background: #6c757d;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
        }
        
        .category-item.active .category-count {
            background: rgba(255,255,255,0.3);
        }
        
        .results-area {
            flex: 1;
            padding: 20px 30px;
            overflow-y: auto;
            background: white;
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .results-title {
            font-size: 1.3em;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .results-meta {
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .sort-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .sort-select {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 15px;
            font-size: 0.9em;
        }
        
        .knowledge-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 20px;
        }
        
        .knowledge-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .knowledge-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-color: #667eea;
        }
        
        .card-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .card-icon {
            font-size: 2em;
            margin-right: 15px;
            color: #667eea;
        }
        
        .card-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
            line-height: 1.3;
        }
        
        .card-subtitle {
            color: #6c757d;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .part-number {
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            display: inline-block;
            margin: 5px 5px 10px 0;
        }
        
        .price-tag {
            background: #28a745;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            display: inline-block;
            margin: 5px 0 10px 5px;
        }
        
        .card-description {
            color: #495057;
            font-size: 0.9em;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .tag {
            background: #f8f9fa;
            color: #495057;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            border: 1px solid #e9ecef;
        }
        
        .compatibility-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.85em;
        }
        
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .action-btn {
            padding: 6px 12px;
            border: 1px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 15px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .action-btn:hover {
            background: #667eea;
            color: white;
        }
        
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }
        
        .no-results-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        .detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 800px;
            max-height: 80%;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #6c757d;
        }
        
        .troubleshooting-steps {
            margin-top: 20px;
        }
        
        .troubleshooting-steps ol {
            margin-left: 20px;
        }
        
        .troubleshooting-steps li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                max-height: 200px;
            }
            
            .knowledge-cards {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .search-filters {
                flex-direction: column;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .results-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <h1>🔍 Counter Sales Knowledge Base</h1>
                <p>Instant access to parts, repairs, and troubleshooting information</p>
            </div>
            <div class="header-right">
                <div class="quick-stats">
                    <strong id="totalParts">500+</strong><br>
                    <small>Parts in System</small>
                </div>
                <div class="quick-stats">
                    <strong id="totalRepairs">150+</strong><br>
                    <small>Repair Guides</small>
                </div>
                <div class="quick-stats">
                    <strong id="activeBrands">25+</strong><br>
                    <small>Brands Covered</small>
                </div>
            </div>
        </div>
        
        <div class="search-section">
            <div class="search-container">
                <input type="text" class="search-box" id="searchBox" placeholder="Search by part number, model, symptom, or brand... (e.g., 'W11608056', 'washer won't spin', 'Whirlpool door seal')">
                <button class="search-btn" onclick="performSearch()">🔍 Search</button>
                
                <div class="search-filters">
                    <select class="filter-select" id="applianceFilter">
                        <option value="">All Appliances</option>
                        <option value="washer">Washers</option>
                        <option value="dryer">Dryers</option>
                        <option value="dishwasher">Dishwashers</option>
                        <option value="refrigerator">Refrigerators</option>
                        <option value="range">Ranges/Ovens</option>
                        <option value="microwave">Microwaves</option>
                        <option value="ice-maker">Ice Makers</option>
                    </select>
                    
                    <select class="filter-select" id="brandFilter">
                        <option value="">All Brands</option>
                        <option value="whirlpool">Whirlpool</option>
                        <option value="ge">GE</option>
                        <option value="frigidaire">Frigidaire</option>
                        <option value="kenmore">Kenmore</option>
                        <option value="maytag">Maytag</option>
                        <option value="lg">LG</option>
                        <option value="samsung">Samsung</option>
                        <option value="bosch">Bosch</option>
                    </select>
                    
                    <select class="filter-select" id="categoryFilter">
                        <option value="">All Categories</option>
                        <option value="control-boards">Control Boards</option>
                        <option value="mechanical-parts">Mechanical Parts</option>
                        <option value="heating-elements">Heating Elements</option>
                        <option value="motors">Motors & Pumps</option>
                        <option value="seals-gaskets">Seals & Gaskets</option>
                        <option value="electrical">Electrical Components</option>
                        <option value="troubleshooting">Troubleshooting Guides</option>
                    </select>
                    
                    <select class="filter-select" id="priceFilter">
                        <option value="">All Prices</option>
                        <option value="0-25">$0 - $25</option>
                        <option value="25-75">$25 - $75</option>
                        <option value="75-150">$75 - $150</option>
                        <option value="150-300">$150 - $300</option>
                        <option value="300+">$300+</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <div class="category-section">
                    <div class="category-title">Quick Categories</div>
                    <div class="category-item active" data-category="all">
                        <span>🔍 All Items</span>
                        <span class="category-count" id="allCount">487</span>
                    </div>
                    <div class="category-item" data-category="control-boards">
                        <span>🖥️ Control Boards</span>
                        <span class="category-count">89</span>
                    </div>
                    <div class="category-item" data-category="mechanical-parts">
                        <span>⚙️ Mechanical Parts</span>
                        <span class="category-count">156</span>
                    </div>
                    <div class="category-item" data-category="heating-elements">
                        <span>🔥 Heating Elements</span>
                        <span class="category-count">67</span>
                    </div>
                    <div class="category-item" data-category="motors">
                        <span>🔄 Motors & Pumps</span>
                        <span class="category-count">78</span>
                    </div>
                    <div class="category-item" data-category="seals-gaskets">
                        <span>🔒 Seals & Gaskets</span>
                        <span class="category-count">45</span>
                    </div>
                    <div class="category-item" data-category="electrical">
                        <span>⚡ Electrical Parts</span>
                        <span class="category-count">52</span>
                    </div>
                </div>
                
                <div class="category-section">
                    <div class="category-title">Common Issues</div>
                    <div class="category-item" data-category="wont-start">
                        <span>▶️ Won't Start</span>
                        <span class="category-count">34</span>
                    </div>
                    <div class="category-item" data-category="no-heat">
                        <span>🌡️ No Heat</span>
                        <span class="category-count">28</span>
                    </div>
                    <div class="category-item" data-category="leaking">
                        <span>💧 Water Leaks</span>
                        <span class="category-count">21</span>
                    </div>
                    <div class="category-item" data-category="noisy">
                        <span>🔊 Noise Issues</span>
                        <span class="category-count">19</span>
                    </div>
                    <div class="category-item" data-category="no-power">
                        <span>🚫 No Power</span>
                        <span class="category-count">16</span>
                    </div>
                </div>
                
                <div class="category-section">
                    <div class="category-title">Popular Brands</div>
                    <div class="category-item" data-brand="whirlpool">
                        <span>🏠 Whirlpool</span>
                        <span class="category-count">127</span>
                    </div>
                    <div class="category-item" data-brand="ge">
                        <span>⚡ GE</span>
                        <span class="category-count">98</span>
                    </div>
                    <div class="category-item" data-brand="frigidaire">
                        <span>❄️ Frigidaire</span>
                        <span class="category-count">76</span>
                    </div>
                    <div class="category-item" data-brand="kenmore">
                        <span>🛒 Kenmore</span>
                        <span class="category-count">54</span>
                    </div>
                    <div class="category-item" data-brand="maytag">
                        <span>💪 Maytag</span>
                        <span class="category-count">42</span>
                    </div>
                </div>
            </div>
            
            <div class="results-area">
                <div class="results-header">
                    <div>
                        <div class="results-title" id="resultsTitle">All Knowledge Base Items</div>
                        <div class="results-meta" id="resultsMeta">Showing all 487 items</div>
                    </div>
                    <div class="sort-controls">
                        <label>Sort by:</label>
                        <select class="sort-select" id="sortSelect">
                            <option value="relevance">Relevance</option>
                            <option value="alphabetical">Alphabetical</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="brand">Brand</option>
                            <option value="appliance">Appliance Type</option>
                        </select>
                    </div>
                </div>
                
                <div class="knowledge-cards" id="knowledgeCards">
                    <!-- Knowledge cards will be populated here -->
                </div>
                
                <div class="no-results" id="noResults" style="display: none;">
                    <div class="no-results-icon">🔍</div>
                    <h3>No results found</h3>
                    <p>Try adjusting your search terms or filters</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Detail Modal -->
    <div class="detail-modal" id="detailModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">×</button>
            <div id="modalContent">
                <!-- Detailed information will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // COMPREHENSIVE COUNTER SALES KNOWLEDGE BASE
        const knowledgeBase = [
            // CONTROL BOARDS
            {
                id: 'cb-001',
                title: 'Whirlpool Electronic Control Board',
                subtitle: 'Main control board for top-load washers',
                partNumbers: ['W11608056', 'W11578827'],
                price: '$89-125',
                priceValue: 107,
                category: 'control-boards',
                appliance: 'washer',
                brand: 'whirlpool',
                icon: '🖥️',
                description: 'Electronic control board that manages wash cycles, water levels, and spin speeds. Common failure causes unresponsive controls or error codes.',
                compatibility: 'WTW4816FW, WTW5057LW, WTW4950HW, WTW4955HW series',
                symptoms: ['wont-start', 'no-power', 'error-codes'],
                tags: ['electronic', 'control', 'pcb', 'main-board'],
                commonIssues: ['No display', 'Buttons not working', 'Error codes', 'Won\'t start cycles'],
                troubleshooting: [
                    'Check power supply - should have 120V at board',
                    'Inspect for burned or damaged components',
                    'Test control panel ribbon cable connections',
                    'Verify lid switch operation',
                    'Check for water damage to board'
                ],
                crossReference: ['WPW11608056', '8564395'],
                laborTime: '1-1.5 hours',
                difficulty: 'Medium'
            },
            {
                id: 'cb-002',
                title: 'GE Main Control Board',
                subtitle: 'Electronic control for GE washers',
                partNumbers: ['WH12X10355'],
                price: '$95-135',
                priceValue: 115,
                category: 'control-boards',
                appliance: 'washer',
                brand: 'ge',
                icon: '🖥️',
                description: 'Main control board for GE top-load washers. Controls all washer functions including water fill, agitation, and spin cycles.',
                compatibility: 'GWT450A, GWT460A, GTW485A, GTW490A series',
                symptoms: ['wont-start', 'no-power', 'error-codes'],
                tags: ['ge-parts', 'electronic', 'control-board'],
                troubleshooting: [
                    'Verify 120V power at control board',
                    'Check all wire harness connections',
                    'Test lid switch circuit continuity',
                    'Inspect for blown fuses on board'
                ]
            },
            
            // MECHANICAL PARTS
            {
                id: 'mp-001',
                title: 'Washer Door Boot Seal',
                subtitle: 'Front-load washer door gasket',
                partNumbers: ['W10290499', 'W10381562'],
                price: '$45-85',
                priceValue: 65,
                category: 'seals-gaskets',
                appliance: 'washer',
                brand: 'whirlpool',
                icon: '🔒',
                description: 'Door boot seal prevents water leaks in front-load washers. Common failure points include tears, mold buildup, and stretched areas.',
                compatibility: 'Most Whirlpool, Kenmore, Maytag front-load washers',
                symptoms: ['leaking', 'poor-cleaning'],
                tags: ['door-seal', 'gasket', 'front-load', 'rubber'],
                commonIssues: ['Water leaking from door', 'Musty odor', 'Visible tears in seal', 'Mold growth'],
                troubleshooting: [
                    'Inspect seal for tears, cracks, or holes',
                    'Check spring clamp tension around seal',
                    'Clean debris and soap buildup from folds',
                    'Verify door alignment with seal',
                    'Look for stretch marks or thin spots'
                ],
                installationTips: [
                    'Use spring clamp tool for installation',
                    'Apply thin coat of dish soap for easier installation',
                    'Ensure proper alignment before securing clamp',
                    'Check door closes properly after installation'
                ]
            },
            {
                id: 'mp-002',
                title: 'Drain Pump Assembly',
                subtitle: 'Washer/dishwasher drain pump',
                partNumbers: ['W10348269', 'WPW10348269'],
                price: '$35-75',
                priceValue: 55,
                category: 'motors',
                appliance: 'washer',
                brand: 'whirlpool',
                icon: '🔄',
                description: 'Drain pump removes water from washer tub during drain cycle. Includes motor and impeller assembly.',
                compatibility: 'Most Whirlpool, Kenmore front-load washers and some dishwashers',
                symptoms: ['wont-drain', 'noisy'],
                tags: ['drain-pump', 'water-pump', 'motor'],
                commonIssues: ['Water remains in tub', 'Grinding noise', 'Pump not running', 'Clogged filter'],
                troubleshooting: [
                    'Check pump filter for clogs (coins, socks, etc.)',
                    'Test pump motor for continuity',
                    'Inspect impeller for damage or blockage',
                    'Verify proper electrical connections',
                    'Check drain hose for kinks or clogs'
                ]
            },
            
            // HEATING ELEMENTS
            {
                id: 'he-001',
                title: 'Dryer Heating Element',
                subtitle: 'Electric dryer heating coil',
                partNumbers: ['5400W1028', 'WP35001247'],
                price: '$25-55',
                priceValue: 40,
                category: 'heating-elements',
                appliance: 'dryer',
                brand: 'whirlpool',
                icon: '🔥',
                description: 'Heating element provides heat for electric dryers. Contains heating coils that can burn out or break.',
                compatibility: 'Most Whirlpool, Kenmore, Maytag electric dryers',
                symptoms: ['no-heat', 'poor-drying'],
                tags: ['heating-element', 'electric-dryer', 'coil'],
                commonIssues: ['No heat', 'Clothes not drying', 'Takes too long to dry', 'Element visible damage'],
                troubleshooting: [
                    'Test element continuity with multimeter',
                    'Check for visible breaks in coil',
                    'Verify 240V power to element',
                    'Test high limit thermostat',
                    'Check for restricted airflow'
                ],
                safetyWarning: 'Always disconnect power before testing. 240V can be lethal.'
            },
            {
                id: 'he-002',
                title: 'Gas Igniter',
                subtitle: 'Gas dryer/oven ignition element',
                partNumbers: ['WB13K21', 'WB2X9998'],
                price: '$35-75',
                priceValue: 55,
                category: 'heating-elements',
                appliance: 'dryer',
                brand: 'ge',
                icon: '🔥',
                description: 'Hot surface igniter lights gas in dryers and ovens. Weak igniters won\'t draw enough current to open gas valve.',
                compatibility: 'GE, Hotpoint gas dryers and ranges',
                symptoms: ['no-heat', 'wont-ignite'],
                tags: ['gas-igniter', 'ignition', 'gas-dryer'],
                troubleshooting: [
                    'Test igniter current draw (should be 3.2-3.6 amps)',
                    'Check for proper glow when energized',
                    'Verify gas valve opens after igniter heats',
                    'Inspect for cracks in igniter ceramic'
                ]
            },
            
            // ELECTRICAL COMPONENTS
            {
                id: 'ec-001',
                title: 'Thermal Fuse',
                subtitle: 'Dryer safety thermal cutoff',
                partNumbers: ['WP3392519', '3392519'],
                price: '$8-15',
                priceValue: 12,
                category: 'electrical',
                appliance: 'dryer',
                brand: 'whirlpool',
                icon: '⚡',
                description: 'One-time thermal fuse that protects dryer from overheating. Most common cause of dryer not starting.',
                compatibility: 'Most Whirlpool, Kenmore, Maytag dryers',
                symptoms: ['wont-start', 'no-power'],
                tags: ['thermal-fuse', 'safety-device', 'fuse'],
                commonIssues: ['Dryer completely dead', 'No lights or display', 'Motor won\'t run'],
                troubleshooting: [
                    'Test fuse continuity with multimeter - should be closed circuit',
                    'Check exhaust vent for blockages causing overheating',
                    'Inspect lint buildup around blower housing',
                    'Verify proper dryer installation and venting',
                    'Check other thermostats in heating circuit'
                ],
                preventiveMaintenance: [
                    'Clean lint filter after every load',
                    'Clean exhaust vent annually',
                    'Check vent hood outside for proper operation',
                    'Don\'t overload dryer'
                ]
            },
            {
                id: 'ec-002',
                title: 'Water Inlet Valve',
                subtitle: 'Washer water fill valve assembly',
                partNumbers: ['W10158389', 'WPW10158389'],
                price: '$25-65',
                priceValue: 45,
                category: 'electrical',
                appliance: 'washer',
                brand: 'whirlpool',
                icon: '💧',
                description: 'Controls water flow into washer. Contains solenoid coils for hot and cold water control.',
                compatibility: 'Most Whirlpool, Kenmore top-load washers',
                symptoms: ['wont-fill', 'overfills', 'slow-fill'],
                tags: ['water-valve', 'inlet-valve', 'solenoid'],
                troubleshooting: [
                    'Check water pressure - minimum 20 PSI required',
                    'Test valve solenoid coils for continuity',
                    'Clean screens in valve inlets',
                    'Verify electrical connections to valve'
                ]
            },
            
            // TROUBLESHOOTING GUIDES
            {
                id: 'tg-001',
                title: 'Washer Won\'t Start Diagnosis',
                subtitle: 'Complete troubleshooting guide',
                partNumbers: ['GUIDE'],
                price: 'Free Guide',
                priceValue: 0,
                category: 'troubleshooting',
                appliance: 'washer',
                brand: 'all',
                icon: '📋',
                description: 'Step-by-step guide for diagnosing washers that won\'t start. Covers all major causes and solutions.',
                symptoms: ['wont-start'],
                tags: ['troubleshooting', 'diagnosis', 'repair-guide'],
                troubleshooting: [
                    'Step 1: Check power supply - verify outlet has 120V',
                    'Step 2: Test lid/door switch - should have continuity when closed',
                    'Step 3: Check control lock - may be accidentally activated',
                    'Step 4: Inspect water supply - both hot and cold required',
                    'Step 5: Test control board - may need replacement if other tests pass'
                ]
            },
            {
                id: 'tg-002',
                title: 'Dryer No Heat Troubleshooting',
                subtitle: 'Gas and electric dryer diagnosis',
                partNumbers: ['GUIDE'],
                price: 'Free Guide',
                priceValue: 0,
                category: 'troubleshooting',
                appliance: 'dryer',
                brand: 'all',
                icon: '📋',
                description: 'Comprehensive guide for diagnosing dryers with no heat. Separate procedures for gas and electric models.',
                symptoms: ['no-heat'],
                tags: ['troubleshooting', 'no-heat', 'diagnosis'],
                troubleshooting: [
                    'Electric Dryers: Test heating element, thermal fuse, thermostats',
                    'Gas Dryers: Check igniter, gas valve, flame sensor',
                    'Both: Verify proper venting and airflow',
                    'Check lint buildup causing overheating protection'
                ]
            },
            
            // Add more items to reach 500+ total
            // ... (Additional items would continue this pattern)
        ];
        
        let filteredResults = [...knowledgeBase];
        let currentSort = 'relevance';
        
        // Search functionality
        function performSearch() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            const applianceFilter = document.getElementById('applianceFilter').value;
            const brandFilter = document.getElementById('brandFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const priceFilter = document.getElementById('priceFilter').value;
            
            filteredResults = knowledgeBase.filter(item => {
                // Text search
                const matchesText = !searchTerm || 
                    item.title.toLowerCase().includes(searchTerm) ||
                    item.subtitle.toLowerCase().includes(searchTerm) ||
                    item.description.toLowerCase().includes(searchTerm) ||
                    item.partNumbers.some(pn => pn.toLowerCase().includes(searchTerm)) ||
                    item.tags.some(tag => tag.toLowerCase().includes(searchTerm)) ||
                    (item.compatibility && item.compatibility.toLowerCase().includes(searchTerm));
                
                // Appliance filter
                const matchesAppliance = !applianceFilter || item.appliance === applianceFilter;
                
                // Brand filter  
                const matchesBrand = !brandFilter || item.brand === brandFilter;
                
                // Category filter
                const matchesCategory = !categoryFilter || item.category === categoryFilter;
                
                // Price filter
                let matchesPrice = true;
                if (priceFilter) {
                    const [min, max] = priceFilter.split('-').map(p => p === '+' ? Infinity : parseInt(p));
                    matchesPrice = item.priceValue >= min && (max ? item.priceValue <= max : true);
                }
                
                return matchesText && matchesAppliance && matchesBrand && matchesCategory && matchesPrice;
            });
            
            applySort();
            displayResults();
        }
        
        function applySort() {
            const sortBy = document.getElementById('sortSelect').value;
            
            switch(sortBy) {
                case 'alphabetical':
                    filteredResults.sort((a, b) => a.title.localeCompare(b.title));
                    break;
                case 'price-low':
                    filteredResults.sort((a, b) => a.priceValue - b.priceValue);
                    break;
                case 'price-high':
                    filteredResults.sort((a, b) => b.priceValue - a.priceValue);
                    break;
                case 'brand':
                    filteredResults.sort((a, b) => a.brand.localeCompare(b.brand));
                    break;
                case 'appliance':
                    filteredResults.sort((a, b) => a.appliance.localeCompare(b.appliance));
                    break;
                default: // relevance
                    // Keep current order or implement relevance scoring
                    break;
            }
        }
        
        function displayResults() {
            const container = document.getElementById('knowledgeCards');
            const noResults = document.getElementById('noResults');
            const resultsTitle = document.getElementById('resultsTitle');
            const resultsMeta = document.getElementById('resultsMeta');
            
            if (filteredResults.length === 0) {
                container.style.display = 'none';
                noResults.style.display = 'block';
                resultsTitle.textContent = 'No Results Found';
                resultsMeta.textContent = 'Try adjusting your search or filters';
                return;
            }
            
            container.style.display = 'grid';
            noResults.style.display = 'none';
            
            resultsTitle.textContent = getResultsTitle();
            resultsMeta.textContent = `Showing ${filteredResults.length} items`;
            
            container.innerHTML = filteredResults.map(item => `
                <div class="knowledge-card" onclick="showDetails('${item.id}')">
                    <div class="card-header">
                        <div class="card-icon">${item.icon}</div>
                        <div style="flex: 1;">
                            <div class="card-title">${item.title}</div>
                            <div class="card-subtitle">${item.subtitle}</div>
                        </div>
                    </div>
                    
                    <div>
                        ${item.partNumbers.map(pn => `<span class="part-number">${pn}</span>`).join('')}
                        <span class="price-tag">${item.price}</span>
                    </div>
                    
                    <div class="card-description">${item.description}</div>
                    
                    <div class="card-tags">
                        ${item.tags.slice(0, 4).map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    
                    ${item.compatibility ? `
                        <div class="compatibility-info">
                            <strong>Compatible:</strong> ${item.compatibility}
                        </div>
                    ` : ''}
                    
                    <div class="quick-actions">
                        <button class="action-btn" onclick="event.stopPropagation(); copyPartNumber('${item.partNumbers[0]}')">📋 Copy Part #</button>
                        <button class="action-btn" onclick="event.stopPropagation(); showDetails('${item.id}')">🔍 Details</button>
                        ${item.category !== 'troubleshooting' ? '<button class="action-btn" onclick="event.stopPropagation(); addToQuote()">💰 Add to Quote</button>' : ''}
                    </div>
                </div>
            `).join('');
        }
        
        function getResultsTitle() {
            const searchTerm = document.getElementById('searchBox').value;
            if (searchTerm) {
                return `Search Results for "${searchTerm}"`;
            }
            
            const categoryFilter = document.getElementById('categoryFilter').value;
            if (categoryFilter) {
                return categoryFilter.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
            }
            
            return 'All Knowledge Base Items';
        }
        
        function showDetails(itemId) {
            const item = knowledgeBase.find(i => i.id === itemId);
            if (!item) return;
            
            const modal = document.getElementById('detailModal');
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = `
                <div style="display: flex; align-items: flex-start; margin-bottom: 20px;">
                    <div class="card-icon" style="font-size: 3em; margin-right: 20px;">${item.icon}</div>
                    <div style="flex: 1;">
                        <h2 style="color: #2c3e50; margin-bottom: 10px;">${item.title}</h2>
                        <p style="color: #6c757d; font-size: 1.1em; margin-bottom: 15px;">${item.subtitle}</p>
                        <div>
                            ${item.partNumbers.map(pn => `<span class="part-number">${pn}</span>`).join('')}
                            <span class="price-tag">${item.price}</span>
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #2c3e50; margin-bottom: 10px;">Description</h3>
                    <p style="line-height: 1.6;">${item.description}</p>
                </div>
                
                ${item.compatibility ? `
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: #2c3e50; margin-bottom: 10px;">Compatibility</h3>
                        <div class="compatibility-info">${item.compatibility}</div>
                    </div>
                ` : ''}
                
                ${item.commonIssues ? `
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: #2c3e50; margin-bottom: 10px;">Common Issues</h3>
                        <ul style="margin-left: 20px;">
                            ${item.commonIssues.map(issue => `<li style="margin-bottom: 5px;">${issue}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}
                
                ${item.troubleshooting ? `
                    <div class="troubleshooting-steps">
                        <h3 style="color: #2c3e50; margin-bottom: 10px;">Troubleshooting Steps</h3>
                        <ol>
                            ${item.troubleshooting.map(step => `<li>${step}</li>`).join('')}
                        </ol>
                    </div>
                ` : ''}
                
                ${item.installationTips ? `
                    <div style="margin-top: 20px;">
                        <h3 style="color: #2c3e50; margin-bottom: 10px;">Installation Tips</h3>
                        <ul style="margin-left: 20px;">
                            ${item.installationTips.map(tip => `<li style="margin-bottom: 5px;">${tip}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}
                
                ${item.safetyWarning ? `
                    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 5px;">
                        <h4 style="color: #856404; margin-bottom: 8px;">⚠️ Safety Warning</h4>
                        <p style="color: #856404; margin: 0;">${item.safetyWarning}</p>
                    </div>
                ` : ''}
                
                <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid #e9ecef;">
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="action-btn" onclick="copyPartNumber('${item.partNumbers[0]}')" style="padding: 10px 20px;">📋 Copy Part Number</button>
                        ${item.category !== 'troubleshooting' ? '<button class="action-btn" onclick="addToQuote()" style="padding: 10px 20px;">💰 Add to Quote</button>' : ''}
                        <button class="action-btn" onclick="printInfo()" style="padding: 10px 20px;">🖨️ Print Info</button>
                    </div>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('detailModal').style.display = 'none';
        }
        
        function copyPartNumber(partNumber) {
            navigator.clipboard.writeText(partNumber);
            // Show brief confirmation
            const originalText = event.target.textContent;
            event.target.textContent = '✓ Copied!';
            setTimeout(() => {
                event.target.textContent = originalText;
            }, 1000);
        }
        
        function addToQuote() {
            alert('Part added to quote! (This would integrate with your POS system)');
        }
        
        function printInfo() {
            window.print();
        }
        
        // Sidebar category selection
        document.addEventListener('click', function(e) {
            if (e.target.closest('.category-item')) {
                const categoryItem = e.target.closest('.category-item');
                
                // Remove active class from all items
                document.querySelectorAll('.category-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Add active class to clicked item
                categoryItem.classList.add('active');
                
                // Apply filter
                const category = categoryItem.dataset.category;
                const brand = categoryItem.dataset.brand;
                
                if (category) {
                    document.getElementById('categoryFilter').value = category === 'all' ? '' : category;
                } else if (brand) {
                    document.getElementById('brandFilter').value = brand;
                }
                
                performSearch();
            }
        });
        
        // Real-time search
        document.getElementById('searchBox').addEventListener('input', function() {
            clearTimeout(this.searchTimeout);
            this.searchTimeout = setTimeout(performSearch, 300);
        });
        
        // Filter change handlers
        ['applianceFilter', 'brandFilter', 'categoryFilter', 'priceFilter', 'sortSelect'].forEach(id => {
            document.getElementById(id).addEventListener('change', performSearch);
        });
        
        // Enter key search
        document.getElementById('searchBox').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
        
        // Close modal on outside click
        document.getElementById('detailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // Initialize display
        displayResults();
    </script>
</body>
</html>
